- name: awkward_BitMaskedArray_to_ByteMaskedArray
  args:
    - tobytemask: List[int8_t]
    - frombitmask: List[uint8_t]
    - bitmaskoffset: int64_t
    - bitmasklength: int64_t
    - validwhen: bool
    - lsb_order: bool
  inparams: ['frombitmask', 'bitmaskoffset', 'bitmasklength', 'validwhen', 'lsb_order']
  outparams: ['tobytemask']
  definition: |
    def awkward_BitMaskedArray_to_ByteMaskedArray(
        tobytemask, frombitmask, bitmaskoffset, bitmasklength, validwhen, lsb_order
    ):
        if lsb_order:
            for i in range(bitmasklength):
                byte = frombitmask[bitmaskoffset + i]
                tobytemask[(i * 8) + 0] = (byte & int(1)) != validwhen
                byte >>= 1
                tobytemask[(i * 8) + 1] = (byte & int(1)) != validwhen
                byte >>= 1
                tobytemask[(i * 8) + 2] = (byte & int(1)) != validwhen
                byte >>= 1
                tobytemask[(i * 8) + 3] = (byte & int(1)) != validwhen
                byte >>= 1
                tobytemask[(i * 8) + 4] = (byte & int(1)) != validwhen
                byte >>= 1
                tobytemask[(i * 8) + 5] = (byte & int(1)) != validwhen
                byte >>= 1
                tobytemask[(i * 8) + 6] = (byte & int(1)) != validwhen
                byte >>= 1
                tobytemask[(i * 8) + 7] = (byte & int(1)) != validwhen
        else:
            for i in range(bitmasklength):
                byte = frombitmask[bitmaskoffset + i]
                tobytemask[(i * 8) + 0] = ((byte & int(128)) != 0) != validwhen
                byte <<= 1
                tobytemask[(i * 8) + 1] = ((byte & int(128)) != 0) != validwhen
                byte <<= 1
                tobytemask[(i * 8) + 2] = ((byte & int(128)) != 0) != validwhen
                byte <<= 1
                tobytemask[(i * 8) + 3] = ((byte & int(128)) != 0) != validwhen
                byte <<= 1
                tobytemask[(i * 8) + 4] = ((byte & int(128)) != 0) != validwhen
                byte <<= 1
                tobytemask[(i * 8) + 5] = ((byte & int(128)) != 0) != validwhen
                byte <<= 1
                tobytemask[(i * 8) + 6] = ((byte & int(128)) != 0) != validwhen
                byte <<= 1
                tobytemask[(i * 8) + 7] = ((byte & int(128)) != 0) != validwhen
  tests:
    - args:
        tobytemask: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        frombitmask: [244, 251, 64, 0, 133]
        bitmaskoffset: 1
        bitmasklength: 4
        validwhen: True
        lsb_order: False
      successful: True
      results:
        tobytemask: [False, False, False, False, False, True, False, False, True, False, True, True, True, True, True, True, True, True, True, True, True, True, True, True, False, True, True, True, True, False, True, False]
    - args:
        tobytemask: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        frombitmask: [244, 251, 64, 0, 133]
        bitmaskoffset: 1
        bitmasklength: 3
        validwhen: True
        lsb_order: False
      successful: True
      results:
        tobytemask: [False, False, False, False, False, True, False, False, True, False, True, True, True, True, True, True, True, True, True, True, True, True, True, True]
