- name: awkward_UnionArray_flatten_length
  specializations:
    - name: awkward_UnionArray32_flatten_length_64
      args:
        - total_length: List[int64_t]
        - fromtags: List[int8_t]
        - fromtagsoffset: int64_t
        - fromindex: List[int32_t]
        - fromindexoffset: int64_t
        - length: int64_t
        - offsetsraws: List[List[int64_t]]
        - offsetsoffsets: List[int64_t]
    - name: awkward_UnionArrayU32_flatten_length_64
      args:
        - total_length: List[int64_t]
        - fromtags: List[int8_t]
        - fromtagsoffset: int64_t
        - fromindex: List[uint32_t]
        - fromindexoffset: int64_t
        - length: int64_t
        - offsetsraws: List[List[int64_t]]
        - offsetsoffsets: List[int64_t]
    - name: awkward_UnionArray64_flatten_length_64
      args:
        - total_length: List[int64_t]
        - fromtags: List[int8_t]
        - fromtagsoffset: int64_t
        - fromindex: List[int64_t]
        - fromindexoffset: int64_t
        - length: int64_t
        - offsetsraws: List[List[int64_t]]
        - offsetsoffsets: List[int64_t]
  inparams: ['fromtags', 'fromtagsoffset', 'fromindex', 'fromindexoffset', 'length', 'offsetsraws', 'offsetsoffsets']
  outparams: ['total_length']
  definition: |
    def awkward_UnionArray_flatten_length(
        total_length,
        fromtags,
        fromtagsoffset,
        fromindex,
        fromindexoffset,
        length,
        offsetsraws,
        offsetsoffsets,
    ):
        total_length[0] = 0
        for i in range(length):
            tag = fromtags[fromtagsoffset + i]
            idx = fromindex[fromindexoffset + i]
            start = offsetsraws[tag][offsetsoffsets[tag] + idx]
            stop = offsetsraws[tag][(offsetsoffsets[tag] + idx) + 1]
            total_length[0] = total_length[0] + (stop - start)
  tests:
    - args:
        total_length: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        fromtags: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        fromtagsoffset: 1
        fromindex: [4, 3, 6, 6, 3, 7, 3, 8, 3, 8, 8]
        fromindexoffset: 0
        length: 3
        offsetsraws: [[1, 2, 1, 2, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4], [2, 1, 0, 3, 1, 2, 0, 3, 1, 2, 2, 2, 1, 2, 3, 1, 0, 2, 3, 0, 2, 1]]
        offsetsoffsets: [0, 0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1]
      successful: True
      results:
        total_length: [1]
    - args:
        total_length: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        fromtags: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
        fromtagsoffset: 0
        fromindex: [3, 4, 7, 7, 4, 1, 3, 8, 3, 8, 8]
        fromindexoffset: 1
        length: 3
        offsetsraws: [[1, 2, 1, 2, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4], [2, 1, 0, 3, 1, 2, 0, 3, 1, 2, 2, 2, 1, 2, 3, 1, 0, 2, 3, 0, 2, 1]]
        offsetsoffsets: [0, 0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1]
      successful: True
      results:
        total_length: [-3]
