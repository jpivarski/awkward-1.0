- name: awkward_ListArray_getitem_jagged_descend
  specializations:
    - name: awkward_ListArray64_getitem_jagged_descend_64
      args:
        - tooffsets: List[int64_t]
        - slicestarts: List[int64_t]
        - slicestartsoffset: int64_t
        - slicestops: List[int64_t]
        - slicestopsoffset: int64_t
        - sliceouterlen: int64_t
        - fromstarts: List[int64_t]
        - fromstartsoffset: int64_t
        - fromstops: List[int64_t]
        - fromstopsoffset: int64_t
    - name: awkward_ListArrayU32_getitem_jagged_descend_64
      args:
        - tooffsets: List[int64_t]
        - slicestarts: List[int64_t]
        - slicestartsoffset: int64_t
        - slicestops: List[int64_t]
        - slicestopsoffset: int64_t
        - sliceouterlen: int64_t
        - fromstarts: List[uint32_t]
        - fromstartsoffset: int64_t
        - fromstops: List[uint32_t]
        - fromstopsoffset: int64_t
    - name: awkward_ListArray32_getitem_jagged_descend_64
      args:
        - tooffsets: List[int64_t]
        - slicestarts: List[int64_t]
        - slicestartsoffset: int64_t
        - slicestops: List[int64_t]
        - slicestopsoffset: int64_t
        - sliceouterlen: int64_t
        - fromstarts: List[int32_t]
        - fromstartsoffset: int64_t
        - fromstops: List[int32_t]
        - fromstopsoffset: int64_t
  inparams: ['slicestarts', 'slicestartsoffset', 'slicestops', 'slicestopsoffset', 'sliceouterlen', 'fromstarts', 'fromstartsoffset', 'fromstops', 'fromstopsoffset']
  outparams: ['tooffsets']
  definition: |
    def awkward_ListArray_getitem_jagged_descend(
        tooffsets,
        slicestarts,
        slicestartsoffset,
        slicestops,
        slicestopsoffset,
        sliceouterlen,
        fromstarts,
        fromstartsoffset,
        fromstops,
        fromstopsoffset,
    ):
        if sliceouterlen == 0:
            tooffsets[0] = 0
        else:
            tooffsets[0] = slicestarts[slicestartsoffset + 0]
        for i in range(sliceouterlen):
            slicecount = int(
                slicestops[slicestopsoffset + i] - slicestarts[slicestartsoffset + i]
            )
            count = int(fromstops[fromstopsoffset + i] - fromstarts[fromstartsoffset + i])
            if slicecount != count:
                raise ValueError(
                    "jagged slice inner length differs from array inner length"
                )
            tooffsets[i + 1] = tooffsets[i] + float(count)
  tests:
    - args:
        tooffsets: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        slicestarts: [1, 2, 3, 4, 5, 6]
        slicestartsoffset: 0
        slicestops: [3, 4, 5, 6, 7, 8]
        slicestopsoffset: 0
        sliceouterlen: 3
        fromstarts: [1, 2, 3, 4, 5, 6]
        fromstartsoffset: 0
        fromstops: [3, 4, 5, 6, 7, 8]
        fromstopsoffset: 0
      successful: True
      results:
        tooffsets: [1, 3.0, 5.0, 7.0]
    - args:
        tooffsets: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        slicestarts: [1, 2, 3, 4, 5, 6]
        slicestartsoffset: 1
        slicestops: [3, 4, 5, 6, 7, 8]
        slicestopsoffset: 1
        sliceouterlen: 3
        fromstarts: [1, 2, 3, 4, 5, 6]
        fromstartsoffset: 1
        fromstops: [3, 4, 5, 6, 7, 8]
        fromstopsoffset: 1
      successful: True
      results:
        tooffsets: [2, 4.0, 6.0, 8.0]
