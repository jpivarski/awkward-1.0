- name: awkward_ListOffsetArray_getitem_adjust_offsets_index
  specializations:
    - name: awkward_ListOffsetArray_getitem_adjust_offsets_index_64
      args:
        - name: tooffsets
          type: List[int64_t]
          direction: out
        - name: tononzero
          type: List[int64_t]
          direction: out
        - name: fromoffsets
          type: Const[List[int64_t]]
          direction: in
          role: ListOffsetArray-offsets
        - name: length
          type: int64_t
          direction: in
          role: default
        - name: index
          type: Const[List[int64_t]]
          direction: in
          role: IndexedArray-index
        - name: indexlength
          type: int64_t
          direction: in
          role: default
        - name: nonzero
          type: Const[List[int64_t]]
          direction: in
          role: ListOffsetArray2-offsets
        - name: nonzerolength
          type: int64_t
          direction: in
          role: default
        - name: originalmask
          type: Const[List[int8_t]]
          direction: in
          role: ByteMaskedArray-mask
        - name: masklength
          type: int64_t
          direction: in
          role: default
  definition: |
    def awkward_ListOffsetArray_getitem_adjust_offsets_index(tooffsets , tononzero , fromoffsets , length , index , indexlength , nonzero , nonzerolength , originalmask , masklength ):
        k = 0
        tooffsets[0] = fromoffsets[0]
        for i in range(length):
            slicestart = fromoffsets[i]
            slicestop = fromoffsets[i + 1]
            numnull = 0
            for j in range(slicestart, slicestop):
                numnull += 1 if originalmask[j] != 0 else 0
            nullcount = 0
            count = 0
            while (k < indexlength) and (((index[k] < 0) and (nullcount < numnull)) or (((index[k] >= 0) and (index[k] < nonzerolength)) and (nonzero[index[k]] < slicestop))):
                if index[k] < 0:
                    nullcount = nullcount + 1
                else:
                    j = index[k]
                    tononzero[j] = nonzero[j] - slicestart
                k = k + 1
                count = count + 1
    
            tooffsets[i + 1] = tooffsets[i] + count
  description: null