- name: awkward_BitMaskedArray_to_IndexedOptionArray
  specializations:
    - name: awkward_BitMaskedArray_to_IndexedOptionArray64
      args:
        - name: toindex
          type: List[int64_t]
          direction: out
        - name: frombitmask
          type: Const[List[uint8_t]]
          direction: in
          role: BitMaskedArray-mask
        - name: bitmasklength
          type: int64_t
          direction: in
          role: default
        - name: validwhen
          type: bool
          direction: in
          role: BitMaskedArray-valid_when
        - name: lsb_order
          type: bool
          direction: in
          role: BitMaskedArray-lsb_order
  definition: |
    def awkward_BitMaskedArray_to_IndexedOptionArray(toindex , frombitmask , bitmasklength , validwhen , lsb_order ):
        if lsb_order:
            for i in range(bitmasklength):
                byte = frombitmask[i]
                if (byte & uint8(1)) == validwhen:
                    toindex[(i * 8) + 0] = (i * 8) + 0
                else:
                    toindex[(i * 8) + 0] = -1
                byte >>= 1
                if (byte & uint8(1)) == validwhen:
                    toindex[(i * 8) + 1] = (i * 8) + 1
                else:
                    toindex[(i * 8) + 1] = -1
                byte >>= 1
                if (byte & uint8(1)) == validwhen:
                    toindex[(i * 8) + 2] = (i * 8) + 2
                else:
                    toindex[(i * 8) + 2] = -1
                byte >>= 1
                if (byte & uint8(1)) == validwhen:
                    toindex[(i * 8) + 3] = (i * 8) + 3
                else:
                    toindex[(i * 8) + 3] = -1
                byte >>= 1
                if (byte & uint8(1)) == validwhen:
                    toindex[(i * 8) + 4] = (i * 8) + 4
                else:
                    toindex[(i * 8) + 4] = -1
                byte >>= 1
                if (byte & uint8(1)) == validwhen:
                    toindex[(i * 8) + 5] = (i * 8) + 5
                else:
                    toindex[(i * 8) + 5] = -1
                byte >>= 1
                if (byte & uint8(1)) == validwhen:
                    toindex[(i * 8) + 6] = (i * 8) + 6
                else:
                    toindex[(i * 8) + 6] = -1
                byte >>= 1
                if (byte & uint8(1)) == validwhen:
                    toindex[(i * 8) + 7] = (i * 8) + 7
                else:
                    toindex[(i * 8) + 7] = -1
        else:
            for i in range(bitmasklength):
                byte = frombitmask[i]
                if ((byte & uint8(128)) != 0) == validwhen:
                    toindex[(i * 8) + 0] = (i * 8) + 0
                else:
                    toindex[(i * 8) + 0] = -1
                byte <<= 1
                if ((byte & uint8(128)) != 0) == validwhen:
                    toindex[(i * 8) + 1] = (i * 8) + 1
                else:
                    toindex[(i * 8) + 1] = -1
                byte <<= 1
                if ((byte & uint8(128)) != 0) == validwhen:
                    toindex[(i * 8) + 2] = (i * 8) + 2
                else:
                    toindex[(i * 8) + 2] = -1
                byte <<= 1
                if ((byte & uint8(128)) != 0) == validwhen:
                    toindex[(i * 8) + 3] = (i * 8) + 3
                else:
                    toindex[(i * 8) + 3] = -1
                byte <<= 1
                if ((byte & uint8(128)) != 0) == validwhen:
                    toindex[(i * 8) + 4] = (i * 8) + 4
                else:
                    toindex[(i * 8) + 4] = -1
                byte <<= 1
                if ((byte & uint8(128)) != 0) == validwhen:
                    toindex[(i * 8) + 5] = (i * 8) + 5
                else:
                    toindex[(i * 8) + 5] = -1
                byte <<= 1
                if ((byte & uint8(128)) != 0) == validwhen:
                    toindex[(i * 8) + 6] = (i * 8) + 6
                else:
                    toindex[(i * 8) + 6] = -1
                byte <<= 1
                if ((byte & uint8(128)) != 0) == validwhen:
                    toindex[(i * 8) + 7] = (i * 8) + 7
                else:
                    toindex[(i * 8) + 7] = -1
  description: null